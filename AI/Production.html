{{ block title }}
        {{ if player.round_number == 1 }} Parte I. Juego de producción {{ else }} Juego de producción (Ronda #{{ round }}) {{ endif }}
{{ endblock }}

{{ block scripts }}
<script>
function toggleText(){
  var x = document.getElementById("Myid");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script>
<script>

var dropdown1 = document.getElementById('id_prod_round_1');
var dropdown2 = document.getElementById('id_prod_round_2');
var dropdownprivate1 = document.getElementById('private1');
var dropdownprivate2 = document.getElementById('private2');

function updatedropprivate() {
    // for private 1
    var selectedIndex1 = dropdown1.selectedIndex;

    // var y = document.getElementById('private1');
    if (selectedIndex1 > 0) {
        var selectedvalue = dropdown1.options[dropdown1.selectedIndex].value;
        dropdownprivate1.value = 20-selectedvalue;
    } else {
        dropdownprivate1.value = -1;
    }


    // for private 2
    var selectedIndex2 = dropdown2.selectedIndex;

    // var y2 = document.getElementById('private2');
    if (selectedIndex2 > 0) {
        var selectedvalue2 = dropdown2.options[dropdown2.selectedIndex].value;
        dropdownprivate2.value = 20-selectedvalue2;
    } else {
        dropdownprivate2.value = -1;
    }
}

function updatedropcommon1() {
    // for common 1
    var selectedIndex1 = dropdownprivate1.selectedIndex;
    if (selectedIndex1 > 0) {
        var selectedvalue = dropdownprivate1.options[dropdownprivate1.selectedIndex].value;
        dropdown1.value = 20-selectedvalue;
    } else {
        dropdown1.value = "";
    }
}

function updatedropcommon2() {
    // for common 2
    var selectedIndex2 = dropdownprivate2.selectedIndex;
    if (selectedIndex2 > 0) {
        var selectedvalue = dropdownprivate2.options[dropdownprivate2.selectedIndex].value;
        dropdown2.value = 20-selectedvalue;
    } else {
        dropdown2.value = "";
    }
}

function populateDropdown(dropdown) {
    for (var i = 0; i <= 20; i++) {
        var option = document.createElement('option');
        option.value = i;
        option.text = i;
        dropdown.appendChild(option);
    }
}

dropdown1.addEventListener('change', updatedropprivate);
dropdown2.addEventListener('change', updatedropprivate);

dropdownprivate1.addEventListener('change', updatedropcommon1);
dropdownprivate2.addEventListener('change', updatedropcommon2);

updatedropprivate();

populateDropdown(dropdownprivate1);
populateDropdown(dropdownprivate2);
</script>

{{ endblock }}

{{ block content }}

<div class="card bg-light">
    <div class="card-body">
    <p>
        En esta parte, usted y el otro trabajador tienen que decidir cómo repartir 20 puntos entre la cuenta grupal y su cuenta privada para cada tarea.
    </p>
    <p>
        Puede encontrar un resumen de las instrucciones al final de esta página.
    </p>
    <p>
        Recuerde que sus puntos finales para cada tarea están determinadas por la siguiente fórmula:
    </p>
        <b>Puntos finales = Puntos en su cuenta privada + su Porcentaje de Negociación *[2 * Total de puntos en la cuenta grupal]</b>
    </p>
    <p>
        Una vez que usted y el otro trabajador hayan terminado sus decisiones, usted podrá ver sus ganancias en cada tarea.
    </p>
    </div>
</div>

<br><br>

<table class="table table-primary">
    <thead>
    <tr>
        <th></th>
        <th>Tarea 1</th>
        <th>Tarea 2</th>
    </tr>
    <tr>
        <td>Su porcentaje de la cuenta grupal:</td>
        <td>{{ player.production_cost_1 }} %</td>
        <td>{{ player.production_cost_2 }} %</td>
    </tr>
    <tr>
        <td><p>Puntos cuenta grupal</p></td>
        <td>{{ formfield 'prod_round_1' }}</td>
        <td>{{ formfield 'prod_round_2' }}</td>
    </tr>
    <tr>
        <td><p>Puntos cuenta privada</p></td>
        <td id="">
            <select id="private1" class="form-select">
                <option value="-1">--------</option>
            </select>
        </td>
        <td id="">
            <select id="private2" class="form-select">
                <option value="-1">--------</option>
            </select>
        </td>
    </tr>
    </thead>
</table>
    {{ next_button }}

<style>
    table {
        border-collapse: collapse;
        table-layout: fixed;
        width: 310px;
      }
    td {word-wrap: break-word;}
</style>


<input type="button" style="align-items: center" value="Click to re-read instructions" onclick="toggleText()">

<div id="Myid" style="display: none;">

    {{ include_sibling 'tabs_reduced.html' }}

</div>


{{ endblock }}
